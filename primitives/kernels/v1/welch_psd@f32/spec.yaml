kernel:
  name: "welch_psd"
  version: "0.1.0"
  dtype: "float32"
  description: "Welch's method for power spectral density estimation"

# ABI Configuration
abi:
  input_shape: [W, C]
  output_shape: [n_fft/2 + 1, C] # Interleaved [frequencies, channels]

# Numerical Validation
# Tolerances are looser than other kernels (e.g., bandpass_fir uses rtol=1e-5)
# due to accumulated floating-point error across multiple operations:
# - Window generation (cosine evaluation)
# - FFT butterfly operations (KissFFT uses single-precision)
# - Magnitude squared calculations
# - Averaging across segments
numerical:
  tolerances:
    rtol: 2e-3  # Relative tolerance: 0.2%
    atol: 1e-4  # Absolute tolerance for near-zero values

# Oracle Configuration
oracle:
  path: oracle.py
  function: compute
  dependencies: [scipy, numpy]

# Kernel configuration parameters
# NOTE: v0.1.0 uses fixed defaults below; runtime configuration will be added in future versions
config:
  n_fft:
    type: int
    default: 256
    description: "Length of the FFT used (fixed in v0.1.0)"
  n_overlap:
    type: int
    default: 128
    description: "Number of points of overlap between segments (fixed in v0.1.0)"
  window:
    type: string
    default: "hann"
    description: "Window function to use (only hann implemented in v0.1.0)"
